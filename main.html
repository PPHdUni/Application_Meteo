<!DOCTYPE html>
<html lang="fr"> 
<head>
	<title>Application_Meteo</title>
	<meta charset="UTF-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
	<div class="jumbotron container" id="root">
		<h1 class="text-center">Welcome</h1>
	</div>
	<script type="text/babel">
	
	/*class MeteoApp extends React.Component {
	
		constructor(props) {
			super(props);
			this.state = {location: 0, welcome: true};
			this.handleSubmit = this.handleSubmit.bind(this);
		}
		
		handleSubmit(event) {
			event.preventDefault();
			this.setState({location: event.target.location, welcome: false});
		}
		
		render() {
		
		
		}
	
	} */
	
	var welcome = true

	function MeteoFunction() {
	
		var location = 0
		var returnValue
	  
		const { useEffect } = React
		const { useState } = React
		
		const [results,updateResults]=useState([]);
		
		const fetchMeteo = (event) => {
		
			location = event.target.location.value
			event.preventDefault();
			welcome = false
		
			fetch('https://jsonplaceholder.typicode.com/todos')
				.then(response => response.json())
				.then(function(myJson) {
					updateResults(myJson[location].title);
					console.log(location);
				});
		}
								
		if(welcome) {
			returnValue = ( 
				<><div id="form"> <form class="text-center" onSubmit={fetchMeteo}>
					 <label>
					 Location :
					 <input type="number" name="location" defaultValue={location}/>
					 </label>
					 <input type="submit" value="Submit" />
				</form></div>
				<div id="meteoInfo"><h1 class="text-center">Bonjour</h1></div></>
						);}
		else {
			returnValue = ( 
				<><div id="form"> <form class="text-center" onSubmit={fetchMeteo}>
					 <label>
					 Location :
					 <input type="number" name="location" defaultValue={location}/>
					 </label>
					 <input type="submit" value="Submit" />
				</form></div>
				<div id="meteoInfo"><h1 class="text-center">{results}</h1></div></>
						);
		}
		
		return returnValue
	}

	const root = ReactDOM.createRoot(document.getElementById('root'));
	root.render(<MeteoFunction />);
	</script>
</body>
</html>
<style>
    body {background-color: lightgrey;}
	.jumbotron {background-color: white;}
</style>